import{c as A,r as w,u as _,a as q,j as e,P as D,C as h,b as p,d as N,S as R,e as g,B as n,f as U,A as b,g as G,h as H,i as $,E as M,k as S,T as Q,l as Z,m as y,n as z,o as L,U as J}from"./index-06367dd5.js";import{C as B,a as E,b as O}from"./collapsible-e2de37aa.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],F=A("circle",K);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],X=A("file-check",W),Y=t=>{switch(t){case"completed":return"text-green-600 bg-green-50";case"active":return"text-blue-600 bg-blue-50";case"upcoming":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},ee=t=>{switch(t){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},I=t=>{const l=new Date(t),c=new Date,x=l.getTime()-c.getTime(),i=Math.ceil(x/(1e3*60*60*24));return i===0?"Today":i===1?"Tomorrow":i>1&&i<=7?`${i} days`:l.toLocaleDateString()},C=({task:t,onNavigate:l})=>{const[c,x]=w.useState(!1),i=t.status==="completed",s=["active","in-progress","overdue"].includes(t.status),d=t.status==="overdue",r=()=>{t.linkedPage&&l(t.linkedPage)};return e.jsx(B,{open:c,onOpenChange:x,children:e.jsxs("div",{className:`border rounded-lg transition-all hover:shadow-sm ${d?"border-red-200 bg-red-50/30":s?"border-blue-200 bg-blue-50/30":"border-gray-200"}`,children:[e.jsx(E,{className:"w-full p-4 text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:i?e.jsx(S,{className:"w-5 h-5 text-green-600"}):d?e.jsx(Q,{className:"w-5 h-5 text-red-600"}):s?e.jsx($,{className:"w-5 h-5 text-blue-600"}):e.jsx(F,{className:"w-5 h-5 text-gray-400"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:`font-medium truncate ${i?"text-gray-500 line-through":"text-gray-900"}`,children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[t.dueDate&&!i&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:I(t.dueDate)})]}),t.completedDate&&e.jsx("span",{className:"text-sm text-green-600",children:"Completed"}),s&&e.jsx(y,{variant:"outline",className:"bg-blue-100 text-blue-800 text-xs",children:"Active"}),t.linkedPage&&e.jsx(M,{className:"w-4 h-4 text-gray-400"}),e.jsx("div",{className:"flex-shrink-0",children:c?e.jsx(z,{className:"w-4 h-4 text-gray-400"}):e.jsx(L,{className:"w-4 h-4 text-gray-400"})})]})]})})]})}),e.jsx(O,{className:"px-4 pb-4",children:e.jsxs("div",{className:"ml-8 space-y-3 pt-2 border-t border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-600",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:t.assignedTo})]}),e.jsx(y,{variant:"outline",className:"text-xs",children:t.category}),e.jsxs(y,{variant:"outline",className:`text-xs ${ee(t.priority)}`,children:[t.priority," priority"]})]}),t.completedDate&&e.jsxs("span",{className:"text-sm text-green-600",children:["Completed ",t.completedDate]})]}),(s||t.linkedPage&&!i)&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[t.linkedPage&&e.jsx(n,{size:"sm",variant:"default",onClick:r,className:"mobile-button-sm",children:t.actionLabel||"Take Action"}),e.jsx(n,{size:"sm",variant:"outline",className:"mobile-button-sm",children:"View Details"})]}),i&&t.linkedPage&&e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsxs(n,{size:"sm",variant:"outline",onClick:r,className:"mobile-button-sm",children:["View ",t.category]})})]})})]})})},se=({phase:t,onNavigate:l})=>{const[c,x]=w.useState(t.status==="active"),i=t.tasks.filter(r=>r.status==="completed").length,s=t.tasks.length,d=s>0?i/s*100:0;return e.jsx(h,{className:"mb-4",children:e.jsxs(B,{open:c,onOpenChange:x,children:[e.jsx(E,{asChild:!0,children:e.jsx(p,{className:"pb-4 cursor-pointer hover:bg-gray-50/50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t.status==="completed"?"bg-green-100":t.status==="active"?"bg-blue-100":"bg-gray-100"}`,children:t.status==="completed"?e.jsx(S,{className:"w-5 h-5 text-green-600"}):t.status==="active"?e.jsx($,{className:"w-5 h-5 text-blue-600"}):e.jsx(F,{className:"w-5 h-5 text-gray-400"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-lg",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(y,{className:`${Y(t.status)} border-0 mb-2`,children:t.status}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{value:d,className:"w-24 h-2"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[i,"/",s]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:c?e.jsx(z,{className:"w-5 h-5 text-gray-400"}):e.jsx(L,{className:"w-5 h-5 text-gray-400"})})]})]})})]})})}),e.jsx(O,{children:e.jsx(g,{className:"pt-0",children:e.jsx("div",{className:"space-y-2",children:t.tasks.map(r=>e.jsx(C,{task:r,onNavigate:l},r.id))})})})]})})};function le({onNavigate:t}){const[l,c]=w.useState("all"),[x,i]=w.useState("phases"),s=_(),d=q(),{taskPhases:r}=d,k=d.getTotalTasksCount(),j=d.getCompletedTasksCount(),u=d.getActiveTasksCount(),T=d.getOverallProgress(),P=r.map(a=>({...a,tasks:a.tasks.filter(o=>l==="all"?!0:l==="active"?["active","in-progress","overdue"].includes(o.status):l==="completed"?o.status==="completed":o.status===l)})).filter(a=>a.tasks.length>0),V=r.flatMap(a=>a.tasks).filter(a=>["active","in-progress","overdue"].includes(a.status)),f=a=>d.getActiveTasksByCategory(a.toLowerCase()).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Task Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your real estate transaction progress"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Overall Progress"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{value:T,className:"w-32 h-2"}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.round(T),"%"]})]})]}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[j," completed"]}),e.jsxs("span",{children:[u," active"]}),e.jsxs("span",{children:[k-j-u," upcoming"]})]})]})]}),e.jsxs(h,{className:"bg-white border-border",children:[e.jsxs(p,{className:"pb-3",children:[e.jsxs(N,{className:"text-lg flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5 text-primary"}),"Task Categories"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Navigate directly to specific task areas"})]}),e.jsx(g,{children:e.jsxs("div",{className:`grid ${s?"grid-cols-1":"grid-cols-2 lg:grid-cols-4"} gap-3`,children:[e.jsxs(n,{variant:"outline",onClick:()=>t("legal"),className:`flex items-center ${s?"gap-2 p-3":"gap-3 p-4"} h-auto bg-white hover:bg-gray-50 border-gray-200 ${s?"mobile-button":""}`,children:[e.jsxs("div",{className:`flex items-center ${s?"gap-2":"gap-3"} flex-1 min-w-0`,children:[e.jsx("div",{className:`${s?"p-1.5":"p-2"} bg-red-100 rounded-lg flex-shrink-0`,children:e.jsx(U,{className:`${s?"w-3 h-3":"w-4 h-4"} text-red-600`})}),e.jsxs("div",{className:"text-left min-w-0 flex-1",children:[e.jsx("div",{className:`${s?"text-sm":""} font-medium truncate`,children:"Legal"}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[f("legal")," active tasks"]})]})]}),e.jsx(b,{className:`${s?"w-3 h-3":"w-4 h-4"} text-gray-400 flex-shrink-0`})]}),e.jsxs(n,{variant:"outline",onClick:()=>t("financing"),className:`flex items-center ${s?"gap-2 p-3":"gap-3 p-4"} h-auto bg-white hover:bg-gray-50 border-gray-200 ${s?"mobile-button":""}`,children:[e.jsxs("div",{className:`flex items-center ${s?"gap-2":"gap-3"} flex-1 min-w-0`,children:[e.jsx("div",{className:`${s?"p-1.5":"p-2"} bg-green-100 rounded-lg flex-shrink-0`,children:e.jsx(G,{className:`${s?"w-3 h-3":"w-4 h-4"} text-green-600`})}),e.jsxs("div",{className:"text-left min-w-0 flex-1",children:[e.jsx("div",{className:`${s?"text-sm":""} font-medium truncate`,children:"Financing"}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[f("financing")," active tasks"]})]})]}),e.jsx(b,{className:`${s?"w-3 h-3":"w-4 h-4"} text-gray-400 flex-shrink-0`})]}),e.jsxs(n,{variant:"outline",onClick:()=>t("inspections"),className:`flex items-center ${s?"gap-2 p-3":"gap-3 p-4"} h-auto bg-white hover:bg-gray-50 border-gray-200 ${s?"mobile-button":""}`,children:[e.jsxs("div",{className:`flex items-center ${s?"gap-2":"gap-3"} flex-1 min-w-0`,children:[e.jsx("div",{className:`${s?"p-1.5":"p-2"} bg-blue-100 rounded-lg flex-shrink-0`,children:e.jsx(X,{className:`${s?"w-3 h-3":"w-4 h-4"} text-blue-600`})}),e.jsxs("div",{className:"text-left min-w-0 flex-1",children:[e.jsx("div",{className:`${s?"text-sm":""} font-medium truncate`,children:"Inspections"}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[f("inspections")," active tasks"]})]})]}),e.jsx(b,{className:`${s?"w-3 h-3":"w-4 h-4"} text-gray-400 flex-shrink-0`})]}),e.jsxs(n,{variant:"outline",onClick:()=>t("insurance"),className:`flex items-center ${s?"gap-2 p-3":"gap-3 p-4"} h-auto bg-white hover:bg-gray-50 border-gray-200 ${s?"mobile-button":""}`,children:[e.jsxs("div",{className:`flex items-center ${s?"gap-2":"gap-3"} flex-1 min-w-0`,children:[e.jsx("div",{className:`${s?"p-1.5":"p-2"} bg-yellow-100 rounded-lg flex-shrink-0`,children:e.jsx(H,{className:`${s?"w-3 h-3":"w-4 h-4"} text-yellow-600`})}),e.jsxs("div",{className:"text-left min-w-0 flex-1",children:[e.jsx("div",{className:`${s?"text-sm":""} font-medium truncate`,children:"Insurance"}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[f("insurance")," active tasks"]})]})]}),e.jsx(b,{className:`${s?"w-3 h-3":"w-4 h-4"} text-gray-400 flex-shrink-0`})]})]})})]}),u>0&&e.jsxs(h,{className:"bg-white border-border",children:[e.jsx(p,{className:"pb-3",children:e.jsxs(N,{className:"text-lg flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-primary"}),"Quick Actions"]})}),e.jsx(g,{children:e.jsx("div",{className:`grid gap-3 ${s?"grid-cols-1":"md:grid-cols-2"}`,children:V.slice(0,4).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`${s?"text-sm":""} font-medium truncate`,children:a.title}),e.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-600 truncate`,children:a.assignedTo}),a.dueDate&&e.jsxs("p",{className:"text-xs text-primary",children:["Due: ",I(a.dueDate)]})]}),a.linkedPage&&e.jsxs(n,{size:s?"icon":"sm",onClick:()=>t(a.linkedPage),className:`${s?"mobile-button-sm w-9 h-9":"ml-2"}`,title:s?a.actionLabel||"Go":void 0,children:[e.jsx(M,{className:"w-4 h-4"}),!s&&e.jsx("span",{className:"ml-2",children:a.actionLabel||"Go"})]})]},a.id))})})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:`flex gap-2 ${s?"w-full":""}`,children:[e.jsx(n,{variant:l==="all"?"default":"outline",size:"sm",onClick:()=>c("all"),className:`${s?"mobile-button-sm flex-1":""}`,children:"All Tasks"}),e.jsxs(n,{variant:l==="active"?"default":"outline",size:"sm",onClick:()=>c("active"),className:`${s?"mobile-button-sm flex-1":""}`,children:["Active (",u,")"]}),e.jsxs(n,{variant:l==="completed"?"default":"outline",size:"sm",onClick:()=>c("completed"),className:`${s?"mobile-button-sm flex-1":""}`,children:["Completed (",j,")"]})]})}),e.jsxs("div",{className:"space-y-4",children:[x==="phases"&&e.jsx(e.Fragment,{children:P.length>0?P.map(a=>e.jsx(se,{phase:a,onNavigate:t},a.id)):e.jsx(h,{children:e.jsxs(g,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No tasks found for the selected filter."}),e.jsx(n,{variant:"outline",onClick:()=>c("all"),className:"mt-2",children:"Show All Tasks"})]})})}),x==="categories"&&e.jsx(e.Fragment,{children:["financing","legal","inspections","insurance","general"].map(a=>{const o=r.flatMap(m=>m.tasks).filter(m=>{const v=m.category.toLowerCase()===a;return l==="all"?v:l==="active"?v&&["active","in-progress","overdue"].includes(m.status):l==="completed"?v&&m.status==="completed":v&&m.status===l});return o.length===0?null:e.jsxs(h,{className:"mb-4",children:[e.jsx(p,{children:e.jsxs(N,{className:"text-lg capitalize",children:[a," (",o.length,")"]})}),e.jsx(g,{children:e.jsx("div",{className:"space-y-2",children:o.map(m=>e.jsx(C,{task:m,onNavigate:t},m.id))})})]},a)})}),x==="list"&&e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(N,{className:"text-lg",children:"All Tasks"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Complete list of all tasks (",r.flatMap(a=>a.tasks).filter(a=>l==="all"?!0:l==="active"?["active","in-progress","overdue"].includes(a.status):l==="completed"?a.status==="completed":a.status===l).length,")"]})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-2",children:r.flatMap(a=>a.tasks).filter(a=>l==="all"?!0:l==="active"?["active","in-progress","overdue"].includes(a.status):l==="completed"?a.status==="completed":a.status===l).map(a=>e.jsx(C,{task:a,onNavigate:t},a.id))})})]})]}),e.jsx(h,{className:"bg-gray-50",children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-semibold text-green-600",children:j}),e.jsx("div",{className:"text-sm text-gray-600",children:"Tasks Completed"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-semibold text-blue-600",children:u}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Tasks"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-semibold text-gray-600",children:k-j-u}),e.jsx("div",{className:"text-sm text-gray-600",children:"Upcoming Tasks"})]})]})})})]})}export{le as default};
